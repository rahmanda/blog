<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Improving Javascript&#39;s Code Readability with Hoisting</title>
    <meta charset="UTF-8">
    
<meta name="description" content="Unpopular opinion towards hoisting and its usability">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3">
    <style>
      /* cyrillic-ext */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v11/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNa7lqDY.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }
      /* cyrillic */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v11/6xK3dSBYKcSV-LCoeQqfX1RYOo3qPK7lqDY.woff2) format('woff2');
        unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }
      /* greek-ext */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v11/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNK7lqDY.woff2) format('woff2');
        unicode-range: U+1F00-1FFF;
      }
      /* greek */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v11/6xK3dSBYKcSV-LCoeQqfX1RYOo3qO67lqDY.woff2) format('woff2');
        unicode-range: U+0370-03FF;
      }
      /* vietnamese */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v11/6xK3dSBYKcSV-LCoeQqfX1RYOo3qN67lqDY.woff2) format('woff2');
        unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
      }
      /* latin-ext */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v11/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNq7lqDY.woff2) format('woff2');
        unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }
      /* latin */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: fallback;
        src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v11/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7l.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }
    </style>
    
<link href="/client.build.f2ff8eff0ebbde8e2d06.css" rel="stylesheet">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="bg-indigo h-1"></div> <nav class="max-w-md mx-auto py-2 px-5 text-base whitespace-nowrap overflow-y-auto"><a href="/" class="mr-4">Home</a> <a href="/archive.html" class="mr-4">Archive</a> <a href="https://id.linkedin.com/in/rahmandawibowo" class="mr-4">About</a></nav> <main role="main" dir="ltr"><article class="post"><h1>Improving Javascript's Code Readability with Hoisting</h1> <div class="text-sm text-grey-darker font-sans"><time datetime="2019-06-21">
        June 21, 2019
      </time> <span class="mx-1">•</span> <span title="6 min read">6 min read</span></div> <div class="text-sm mt-6 text-grey-darker font-sans"><!----> <span><a href="/peran-hoisting-dalam-meningkatkan-keterbacaan-kode-javascript.html">
          Read original post (ID)
        </a> <span class="mx-1">•</span> <a href="/en">
          View all posts (EN)
        </a></span></div> <section class="mt-8"><p>Many people don't like hoisting because of its confusing nature. Moreover, super popular style guide like <a href="https://github.com/airbnb/javascript#functions">airbnb/javascript</a> recommends not to use hoisting at all. Why does it happen though?</p>
<p>To know the reason behind it, let's take a look at an example below.</p>
<pre><code class="language-js">add(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<p>What is the return value of <code>add</code> function call above?</p>
<p>The return value is <code>4</code> even though the <code>add</code> function is declared after its function call. Because Javascript has hoisting behaviour, this kind of function declaration will automatically be moved to the very top of a scope during the execution. That is why as long as we  declare the functions in the same scope, those function calls will not produce reference error.</p>
<p>This kind of behaviour is not common to find in other programming languages. Normally, we expect an error every time there is a call before the function declaration. Many programmers, especially people who have experience in other programming language, find hoisting confusing and decide to always declare functions early in the program. Some of them <a href="https://github.com/airbnb/javascript#functions--declarations">even take it further</a> to use this kind of coding style to make sure that they won't encounter hoisting behaviour.</p>
<pre><code class="language-js">add(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// ReferenceError: can't access lexical declaration `add' before initialization</span>

<span class="hljs-keyword">const</span> add = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addFn</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<p>In my opinion, above example just complicates things even more because it is now longer and we have to name our function twice. When thinking about improving readability, this pattern just adds another confusion because it is uncommon to code like this in other programming languages as well.</p>
<h2>Readability on anti-hoisting vs hoisting-first code</h2>
<p>Below example is a simple code which doesn't make use of <em>hoisting</em> (even though the <em>hoisting</em> behaviour is still there).</p>
<pre><code class="language-js"><span class="hljs-comment">// anti-hoisting.js</span>

<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> glob <span class="hljs-keyword">from</span> <span class="hljs-string">'glob'</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFilename</span>(<span class="hljs-params">filePath</span>) </span>{
  <span class="hljs-keyword">return</span> path.basename(filePath, path.extname(filePath));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFile</span>(<span class="hljs-params">filePath</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">path</span>: filePath,
    <span class="hljs-attr">filename</span>: getFilename(filePath),
    <span class="hljs-attr">content</span>: fs.readFileSync(filePath, <span class="hljs-string">'utf-8'</span>),
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAllFiles</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> globPattern = path.join(__dirname, <span class="hljs-string">'src/*.md'</span>);
  <span class="hljs-keyword">const</span> filePaths = glob.sync(globPattern);
  <span class="hljs-keyword">const</span> files = filePaths.map(readFile);
  <span class="hljs-keyword">return</span> files;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> getAllFiles;
</code></pre>
<p>In my opinion, this kind of coding style is not readable because of several things:</p>
<p><strong>Hard to identify the main function and the exported functions</strong></p>
<p>The first things I always expect to know every time I dig into a Javascript code are the main function and the exported functions. However in our case above, we can't easily identify them because we need to read all of the code to the very bottom. On a very long lines of code, this will be even harder.</p>
<p><strong>Hard to follow the entire flow of the program</strong></p>
<p>Because every function needs to be declared early in a program, we can't easily follow how the program works.</p>
<p>Let say we want to know the entire process of the previous example and we have found our main function declaration, <code>getAllFiles</code> at the bottom of the program. As we read the body of the function, we know that there is a <code>readFile</code> function call. So, we have to move to the earlier code to find where it is being declared. After we find <code>readFile</code> declaration, there is another function call inside of it, which is <code>getFilename</code>. Then we have to look at the previous lines until there is no more function call aside from external functions.</p>
<p>So, to follow the entire process of the code, we need to read in reverse order from bottom to top. Of course this is not a common way for us to read because we are used to read from top to bottom.</p>
<p>One of the initial reasons to write all of the declarations on the very top was to know all of the available functions. However in reality, every time there is a function call, we still need to move again to where it is being declared in order to know how the function works.</p>
<p>Now, compare it with this example which make use of hoisting (or I like to call it <em>hoisting-first</em> method).</p>
<pre><code class="language-js"><span class="hljs-comment">// hoisting-first.js</span>

<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> glob <span class="hljs-keyword">from</span> <span class="hljs-string">'glob'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> getAllFiles;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAllFiles</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> globPattern = path.join(__dirname, <span class="hljs-string">'src/*.md'</span>);
  <span class="hljs-keyword">const</span> filePaths = glob.sync(globPattern);
  <span class="hljs-keyword">const</span> files = filePaths.map(readFile);
  <span class="hljs-keyword">return</span> files;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFile</span>(<span class="hljs-params">filePath</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">path</span>: filePath,
    <span class="hljs-attr">filename</span>: getFilename(filePath),
    <span class="hljs-attr">content</span>: fs.readFileSync(filePath, <span class="hljs-string">'utf-8'</span>),
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFilename</span>(<span class="hljs-params">filePath</span>) </span>{
  <span class="hljs-keyword">return</span> path.basename(filePath, path.extname(filePath));
}
</code></pre>
<p>What I did was reordering the declaration of the functions from the previous code. This way, it is easier to find the main function because now the export declaration is located earlier in the code. In addition to that, it is easier to follow the flow of the program because every function declaration is placed immediately after the function that uses it. So, we only need to read naturally from top to bottom without every look back to the previous declarations.</p>
<p>The code which is written in hoisting-first method is also easier to read on a module which has a lot of functions. Even though I don't recommend to write a lot of code on a single module or file, I just want to explain that this coding style might be beneficial for certain situation.</p>
<h2>The downsides of hoisting-first</h2>
<p>If you want to code in hoisting-first way and you are fond of using eslint on your text-editor, you may want to reconfigure your eslint settings. This is because some of the eslint preset, especially <a href="https://www.npmjs.com/package/eslint-config-airbnb">airbnb config</a>, set up a bunch of <em>anti-hoisting</em> rules. Therefore, these kind of rules need to be turned off so that there is no error when coding or doing a git commit.</p>
<p>However after the <em>anti-hoisting</em> rules have been turned off, it becomes more free to declare functions. Therefore, we need to restrain ourselves to not turn our code into a mess.</p>
<h2>Closing words</h2>
<p>Because the nature of hoisting has been part of the Javascript, writing code with hoisting-first style should be understood for every aspiring Javascript coders. I don't try to argue that my method is the best of the best. All of this write up are solely for giving an insight from different perspective.</p>
<p>If you aren't convinced of using hoisting-first style after reading this article, it is entirely fine. At least, now you understand a little bit more about hoisting (hopefully).</p>
<h2>Extra</h2>
<p>Because I was very curious about why hoisting nature was added on Javascript, I looked for articles about this matter and I found an interesting answer which came from <a href="https://en.wikipedia.org/wiki/Brendan_Eich">Brendan Eich</a>, the creator of the Javascript himself. He stated something like this on twitter:</p>
<blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/DmitrySoshnikov?ref_src=twsrc%5Etfw">@DmitrySoshnikov</a> <a href="https://twitter.com/jashkenas?ref_src=twsrc%5Etfw">@jashkenas</a> yes, function declaration hoisting is for mutual recursion &amp; generally to avoid painful bottom-up ML-like order</p>&mdash; BrendanEich (@BrendanEich) <a href="https://twitter.com/BrendanEich/status/33403701100154880?ref_src=twsrc%5Etfw">February 4, 2011</a></blockquote>
<p>Based on his tweet, I can say that my hoisting-first method has been well aligned with the real purpose of the hoisting itself from the very beginning.</p>
<p>What do you think?</p>
</section></article> <footer class="flex flex-col md:flex-row max-w-md mx-auto my-8"><!----> <!----></footer></main></div>
    
<script src="/client.build.153f9bdea64861dc6c99.js" type="text/javascript" async></script>
    <div id="disqus_thread" class="max-w-md mx-auto px-6 py-12"></div>
    <script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'ambercatbyrahmanda'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>

    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-73365330-1', 'auto');
    ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->
  </body>
</html>
